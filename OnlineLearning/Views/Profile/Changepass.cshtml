@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@model ChangePasswordViewModel

<partial name="_NoficationPartial" />
<header class="site-header d-flex flex-column justify-content-center align-items-center">
    <div class="container">
        <div class="row align-items-center">

            <div class="col-lg-5 col-12">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a asp-action="Index" asp-controller="Home">Change password</a></li>

                        <li class="breadcrumb-item active" aria-current="page">Change password</li>
                    </ol>
                </nav>

                <h2 class="text-white">Change password</h2>
            </div>

        </div>
    </div>
</header>

<section class="profile-section">
    <div class="container emp-profile">
        <form asp-action="Changepass" asp-controller="Profile" method="post" enctype="multipart/form-data">
            <div class="row">
                
                <div class="col-md-8">
                    
                    <div class="form-group">
                        <input hidden asp-for="Username" class="form-control" />
                        <span asp-validation-for="Username" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <label asp-for="OldPassword">Old Password:</label>
                        <input asp-for="OldPassword" class="form-control" />
                        <span asp-validation-for="OldPassword" class="text-danger"></span>
                    </div>
                    
                    <div class="form-group">
                        <label asp-for="NewPassword">New Password:</label>
                        <input asp-for="NewPassword" class="form-control" oninput="validatePassword()" />
                        <span asp-validation-for="NewPassword" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <label asp-for="ConfirmNewPassword">Confirm New Password:</label>
                        <input asp-for="ConfirmNewPassword" class="form-control" oninput="validateConfirmPassword()" />
                        <span asp-validation-for="ConfirmNewPassword" class="text-danger"></span>
                    </div>
                   
                    <button type="submit"
                            style="margin-top: 10px;"
                            class="btn custom-btn" onclick="toggleLoader()">
                        Save Changes
                    </button>
                </div>
            </div>
        </form>
    </div>
</section>



<script>

    function validatePassword() {
        var password = document.getElementById('password').value;
        var error = document.getElementById('passwordError');
        var passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{6,}$/;

        if (!passwordRegex.test(password)) {
            error.textContent = "Passwords must be at least 6 characters, including uppercase, lowercase, and numeric characters.";
        } else {
            error.textContent = "";
        }
    }


    function validateConfirmPassword() {

        var password = document.getElementById('password').value;
        var confirmPassword = document.getElementById('confirmPassword').value;
        var error = document.getElementById('confirmPasswordError');

        if (password !== confirmPassword) {
            error.textContent = "Password and Password Confirmation do not match.";
        } else {
            error.textContent = "";
        }
    }
</script>
